!function(t){function i(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}var o={};i.m=t,i.c=o,i.i=function(t){return t},i.d=function(t,o,e){i.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:e})},i.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(o,"a",o),o},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="",i(i.s=0)}([function(t,i,o){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){function i(i){return this.each(function(){var n=t(this),s=n.data("patternLock"),r=t.extend({},o.DEFAULTS,n.data(),"object"==(void 0===i?"undefined":e(i))&&i);s||n.data("patternLock",s=new o(this,r)),"string"==typeof i&&s[i]()})}if(void 0===t)throw new Error("Pattern lock need jquery as a dependency.");var o=function(i,o){this.$container=t(i),"static"===this.$container.css("position")&&this.$container.css("position","relative"),this.options=o,this.width=2*this.$container.width(),this.height=2*this.$container.height();var e=document.createElement("canvas");t.extend(e.style,{position:"absolute",top:"-50%",left:"-50%",transform:"scale(0.5)"}),e.width=this.width,e.height=this.height;var n=e.cloneNode(!0),s=e.cloneNode(!0),r=e.cloneNode(!0);this.$container.append(s),this.$container.append(r),this.$container.append(e),this.$container.append(n);var h=e.getContext("2d");this.options.centers.forEach(t.proxy(function(t){this.drawCircle(h,t[0],t[1],this.options.circleRadius,"stroke")}),this),this.pointCtx=n.getContext("2d"),this.lineCtx=s.getContext("2d"),this.elasticCtx=r.getContext("2d"),this.searchList=[0,1,2,3,4,5,6,7,8],this.currentCircle=-1,this.result=[],this.initPassword="",this.password=String(this.options.correctPassword),this.$container.on("touchstart",t.proxy(this.onMouseDownOrTouchStart,this)),this.$container.on("mousedown",t.proxy(this.onMouseDownOrTouchStart,this))};o.DEFAULTS={mode:"set",minLength:5,lineColor:"#8ac7fd",lineWidth:5,defaultCircleColor:"#aaa",activatedCircleColor:"#38a6fd",pointColor:"#38a6fd",circleRadius:.07,pointRadius:.05,centers:[[.15,.15],[.5,.15],[.85,.15],[.15,.5],[.5,.5],[.85,.5],[.15,.85],[.5,.85],[.85,.85]]},o.prototype.drawCircle=function(i,o,e,n,s,r){i=t.extend(i,{strokeStyle:this.options.defaultCircleColor},r||{}),i.beginPath(),i.arc(this.width*o,this.height*e,this.width*n,0,2*Math.PI),"stroke"===s?i.stroke():i.fill()},o.prototype.activateCircle=function(t){this.drawCircle(this.pointCtx,this.options.centers[t][0],this.options.centers[t][1],this.options.pointRadius,"fill",{fillStyle:this.options.pointColor}),this.drawCircle(this.pointCtx,this.options.centers[t][0],this.options.centers[t][1],this.options.circleRadius,"stroke",{strokeStyle:this.options.activatedCircleColor})},o.prototype.drawLine=function(i,o,e,n,s,r){i=t.extend(i,{strokeStyle:this.options.lineColor,lineWidth:this.options.lineWidth},r||{}),i.beginPath(),i.moveTo(o*this.width,e*this.height),i.lineTo(n*this.width,s*this.height),i.stroke()},o.prototype.getEvtPos=function(t){return{x:t.pageX||t.originalEvent.touches[0].pageX,y:t.pageY||t.originalEvent.touches[0].pageY}},o.prototype.windowToCanvas=function(t,i){var o=this.$container[0].getBoundingClientRect();return{x:t-o.left,y:i-o.top}},o.prototype.getStdPos=function(t){return{x:2*t.x/this.width,y:2*t.y/this.height}},o.prototype.getTargetCircle=function(t){for(var i=this.options.centers,o=this.options.circleRadius,e=0,n=this.searchList.length;e<n;e++){var s=this.searchList[e];if((t.x-i[s][0])*(t.x-i[s][0])+(t.y-i[s][1])*(t.y-i[s][1])<o*o)return this.searchList.splice(e,1),s}},o.prototype.updateElastic=function(t){var i=this.options.centers;this.elasticCtx.clearRect(0,0,this.width,this.height),this.drawLine(this.elasticCtx,i[this.currentCircle][0],i[this.currentCircle][1],t.x,t.y)},o.prototype.onMouseDownOrTouchStart=function(i){i.preventDefault();var o=this.getEvtPos(i),e=this.getStdPos(this.windowToCanvas(o.x,o.y)),n=this.getTargetCircle(e);this.options.centers,this.options.pointRadius;void 0!==n&&(this.currentCircle=n,this.result.push(n),this.activateCircle(n),this.$container.on("touchmove",t.proxy(this.onMouseMoveOrTouchMove,this)),this.$container.on("touchend",t.proxy(this.onMouseUpOrTouchEnd,this)),this.$container.on("mousemove",t.proxy(this.onMouseMoveOrTouchMove,this)),this.$container.on("mouseup",t.proxy(this.onMouseUpOrTouchEnd,this)))},o.prototype.onMouseMoveOrTouchMove=function(t){t.preventDefault();var i=this.getEvtPos(t),o=this.getStdPos(this.windowToCanvas(i.x,i.y)),e=this.getTargetCircle(o),n=this.options.centers;this.options.pointRadius;if(void 0!==e)return this.drawLine(this.lineCtx,n[this.currentCircle][0],n[this.currentCircle][1],n[e][0],n[e][1]),this.currentCircle=e,this.result.push(e),this.activateCircle(e),void this.elasticCtx.clearRect(0,0,this.width,this.height);this.updateElastic(o)},o.prototype.onMouseUpOrTouchEnd=function(i){this.$container.off("touchmove"),this.$container.off("touchend"),this.$container.off("mousemove"),this.$container.off("mouseup");var o=this.result.join("");if("set"===this.options.mode)if(o.length<this.options.minLength){var e=t.Event("short.patternlock",{shortPassword:o});this.$container.trigger(e)}else{this.initPassword=o;var n=t.Event("init.patternlock",{initPassword:o});this.$container.trigger(n),this.options.mode="again"}else if("again"===this.options.mode){if(this.initPassword!==o){var s=t.Event("diff.patternlock",{diffPassword:o});this.$container.trigger(s)}else{var r=t.Event("set.patternlock",{password:o});this.$container.trigger(r),this.password=o}this.options.mode="set"}else if("validate"===this.options.mode){if(!this.password)throw new Error("No password set");if(o!==this.password){var h=t.Event("wrong.patternlock",{wrongPassword:o});this.$container.trigger(h)}else{var c=t.Event("correct.patternlock");this.$container.trigger(c)}}this.searchList=[0,1,2,3,4,5,6,7,8],this.result=[],this.elasticCtx.clearRect(0,0,this.width,this.height),setTimeout(t.proxy(function(){this.pointCtx.clearRect(0,0,this.width,this.height),this.lineCtx.clearRect(0,0,this.width,this.height)},this),500)},o.prototype.set=function(){this.options.mode="set"},o.prototype.validate=function(){this.options.mode="validate"},o.prototype.disable=function(){this.$container.off("mousedown"),this.$container.off("touchstart")},o.prototype.enable=function(){this.$container.on("mousedown",t.proxy(this.onMouseDownOrTouchStart,this)),this.$container.on("touchstart",t.proxy(this.onMouseDownOrTouchStart,this))};var n=t.fn.patternLock;t.fn.patternLock=i,t.fn.patternLock.Constructor=o,t.fn.patternLock.noConflict=function(){return t.fn.patternLock=n,this},t(function(){i.call(t(".pattern-lock"))})}(jQuery)}]);